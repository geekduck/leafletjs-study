### 地域メッシュメモ

基点は左下

* 第1次メッシュ

  緯度差: 40分(0.6666666度)

  経度差: 1度

  1辺の長さ: 約80km

  コード例: 5339

  計算式: (lat * 1.5 * 100) + (lan - 100) 小数点以下切り捨て

* 第2次メッシュ

  緯度差: 5分(0.08333333333333333)

  経度差: 7分30秒(0.125)

  1辺の長さ: 約10km

  コード例: 5339-23

* 第3次メッシュ

  緯度差: 30秒(0.008333333333333333)

  経度差: 45秒(0.0125)

  1辺の長さ: 約1km

  コード例: 5339-23-43 5339-46-11(東京駅)

* 2分の1地域メッシュ

  緯度差: 15秒(0.004166666666666667)

  経度差: 22.5秒(0.00625)

  1辺の長さ: 約0.5km

  左下:1, 右下:2, 左上:3, 右上:4

  コード例: 5339-23-43-1

### 地域メッシュコードを緯度経度(左下)に変換する

  例1: 5339-45-26 -> 53 39 4 5 2 6
      緯度: ((53 / 1.5 * 3600) + (4 * 5 * 60) + (2 * 30)) / 3600
      経度: (((39 + 100) * 3600) + (5 * 7.5 * 60) + (6 * 45)) / 3600

  例2: 5339-46-11 -> 53 39 4 6 1 1
      緯度: ((53 / 1.5 * 3600) + (4 * 5 * 60) + (1 * 30)) / 3600 = 35.675_35.68333333333333
      経度: (((39 + 100) * 3600) + (6 * 7.5 * 60) + (1 * 45)) / 3600 = 139.7625_139.775

### 緯度経度を地域メッシュコードに変換する



### 緯度経度メモ

  例: 東京駅
      10進数表記  緯度:35.681298, 経度:139.766247
      60進数表記  緯度:35度40分52.673秒、経度: 139度45分58.489秒



  計算式:
    10進数表記 -> 60進数表記

    度: 10進数表記の整数部分  例: 35.681298 -> 35
    分: 10進数表記の小数部分 * 60の整数部分 例: 35.681298 -> 0.681298 -> 0.681298 * 60 -> 40.87788 -> 40
    秒: 分の小数部分 * 60 例: 0.87788 * 60 ->52.6728

    ```js
      var lat = 35.681298; lat = Math.floor(lat) + "度" + Math.floor((lat % 1).toFixed(10) * 60) + "分" + ((lat % 1).toFixed(10) * 60 % 1 * 60).toFixed(10) + "秒"
      var lng = 139.766247; lng = Math.floor(lng) + "度" + Math.floor((lng % 1).toFixed(10) * 60) + "分" + ((lng % 1).toFixed(10) * 60 % 1 * 60).toFixed(10) + "秒"
    ```

    60進数表記 -> 10進数表記
    ```js
      var lat = "35,40,52.6728"; lat = Number(lat.split(",")[0]) + Number(lat.split(",")[1] / 60) + Number(lat.split(",")[2] / 60 / 60)
      var lng = "139,45,58.4892"; lng = Number(lng.split(",")[0]) + Number(lng.split(",")[1] / 60) + Number(lng.split(",")[2] / 60 / 60)
    ```







### 参考サイト

* http://www.gis-tool.com/gisfreeservice/



end
